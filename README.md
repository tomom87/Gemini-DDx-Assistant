# DDx Assistant (Chrome Extension)

Gemini 3.0 Flash (Preview) を活用した、臨床医向けの鑑別診断支援 Chrome 拡張機能です。
電子カルテやメモのテキストを選択し、サイドパネルで即座に鑑別リスト、見逃してはいけない疾患、Red Flag、追加問診などを生成します。

**【重要】本ツールは研究・教育目的のプロトタイプです。実際の臨床判断には使用せず、必ず医師の判断を優先してください。**

## 🚀 主な機能

1.  **鑑別診断の生成 (Differential Diagnosis)**
    *   Common/Likely（頻度が高い疾患）
    *   Must Not Miss（見逃してはいけない致死的疾患）
    *   Red Flags（危険徴候）
    *   Next Steps（追加すべき問診・検査）
    *   Rationale（なぜその疾患を挙げたかの根拠）

2.  **強力な個人情報保護 (PHI Guard)**
    *   **ローカル処理**: テキストは送信前にブラウザ内で解析されます。
    *   **自動墨消し**: 患者名、ID、日付、連絡先、特定の施設名などを検知すると、送信ボタンを無効化（Red Block）または警告（Yellow Warning）します。
    *   **年齢の自動カテゴライズ**: 具体的な年齢（例: "72歳"）を自動で `[AGE_REDACTED]` に置換し、LLMには `65+` などのカテゴリ情報のみを送信します。

3.  **参考文献の厳格な検証 (Hallucination 対策)**
    *   LLMが生成した PMID（論文ID）は、バックグラウンドで PubMed に実在確認を行います。
    *   実在しない、またはリンク切れの論文は自動的に非表示になります。

4.  **Google Gemini 3.0 Flash 搭載**
    *   高速かつ高精度な推論を実現。
    *   APIキーはユーザー自身のものを利用（BYOK: Bring Your Own Key）。

## 📦 インストール方法

1.  このリポジトリをダウンロード（または `git clone`）します。
2.  Google Chrome を開き、アドレスバーに `chrome://extensions/` と入力します。
3.  右上の **「デベロッパーモード」** をオンにします。
4.  **「パッケージ化されていない拡張機能を読み込む」** をクリックし、ダウンロードしたフォルダを選択します。

## 🔑 初期設定

1.  インストール後、ツールバーの拡張機能アイコン（パズルピース）をクリックし、「DDx Assistant」をピン留めします。
2.  アイコンを右クリックし、**「オプション」** を選択します。
3.  [Google AI Studio](https://aistudio.google.com/) で取得した APIキーを入力し、「Save」をクリックします。
    *   APIキーは最大4つまで登録でき、自動ローテーションされます。

## 🛡️ プライバシーとセキュリティ

*   **データ非保存**: 送信されたテキストデータは、サーバーやローカルストレージに一切保存されません。
*   **ローカルPHIフィルタ**: 個人情報（氏名、IDなど）の検出ロジックはすべてブラウザ上で完結しており、外部サーバーを経由しません。
*   **API通信**: Google Gemini API と PubMed (NCBI) への通信のみを行います。

## ⚠️ 免責事項

本ソフトウェアは現状のまま提供されます。開発者は本ソフトウェアの使用によって生じた、いかなる損害についても責任を負いません。医療現場での使用は、各施設のポリシーに従ってください。

---
Created by [tomom87](https://github.com/tomom87)  
Source Code: [Gemini-DDx-Assistant](https://github.com/tomom87/Gemini-DDx-Assistant)
Powered by Google Gemini
